/* eslint-disable no-debugger */
/* eslint-disable no-case-declarations */
/* eslint-disable no-undef */
// @ts-nocheck

(function(){
	const vscode = acquireVsCodeApi();

	document.getElementById('query').addEventListener('keydown', function(event) {
		if (event.key === 'Enter') {
			event.preventDefault();
			const content = event.target.value;
			if (content.trim()) {
				vscode.postMessage({
					command: 'addMessage',
					message: {
						role: 'dreamscript',
						content: content.trim()
					}
				});
				event.target.value = '';
			}
			return false;
		}
	});

	document.addEventListener('DOMContentLoaded', (event) => {
        window.addEventListener('message', event => {
            const message = event.data;
            switch (message.command) {
                case 'loadMetadata':
					const messages = document.getElementsByClassName("message");
					messages[messages.length - 1].scrollIntoView();
                    break;
                case 'addLLMResponseChunk':
					const streamed = document.getElementsByClassName("streamed");
					console.log("hello ***")
					console.log(event);
					debugger;
					const content = event.target.value;
					streamed[0].innerHTML += content;
                    break;
            }
        });
	});
}());
